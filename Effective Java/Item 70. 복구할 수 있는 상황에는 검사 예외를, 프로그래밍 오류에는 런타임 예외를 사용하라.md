## 아이템 70 복구할 수 있는 상황에는 검사 예외를, 프로그래밍 오류에는 런타임 예외를 사용하라

Exception의 분류에는 RuntimeException과 여러 Exceptino들이 있다.
RuntimeException 외의 Exception을 검사 예외라고 부른다. <br>

언제 어떤걸 사용할지 헷갈리기 쉬운데 그에 대한 지침이 있다. 
1. 호출하는 쪽에서 복구할 것이 예상되면 검사 예외를 사용해라
2. 프로그래밍 오류는 비검사 예외를 던져라
3. 확실하지 않은 경우엔 비검사 예외로 던져라
4. 검사 예외도 아니고, RuntimeException도 아닌 throwable은 정의하지 말라
5. 검사 예외는 복구에 필요한 정보를 알려주는 메서드를 제공해라

하나씩 알아보자.

## 1. 호출하는 쪽에서 복구할 것이 예상되면 검사 예외를 사용해라

비검사 throwable에는 RuntimeException과 Error가 있다.  <br>

검사 예외와 비검사 예외의 사용이 헷갈린다면, 이 규칙을 지쳐라. <br>
기본적으로 Checked Exception은 호출자가 예외를 catch로 잡아 처리하는 것을 강제한다. <Br>
따라서 메서드 선언에 포함된 검사 예외들은 그 메서드를 호출했을 때 "이런 예외가 발생할 수 있다!" 
라는 것을 API 호출자에게 알려주는 것이다 <br>
더 정확히는 예외 상황 복구를 강제한 것이다. <br> 



## 2. 프로그래밍 오류는 비검사 예외를 던져라
RuntimeException 대부분은 클라이언트 측에서 API의 제약을 (전제조건을) 지키지 못한데에서 발생한다. <br>
예를 들어, 회원가입시 비밀번호의 형식을 맞추지 않았다던지, 이미 가입한 이메일로 회원가입 신청을 한다던지 등의 사유다. <br>
서비스에선 분명 비밀번호는 정해진 양식이 있다거나, 이미 가입한 이메일로는 가입할 수 없다고 알려줬을것이다. <br>

문제는 이런 예외들이 복구 가능한지, 복구할 수 없는지 항상 명확하지는 않다.
따라서, API를 작성하는 프로그래머는 복구할 수 있는 상황이라면 검사 예외를 던져 복구하게끔 만들고,
그렇지 않다면 런타임 예외를 던지면 된다. <br>
확신하기 어려운 경우엔 비검사 예외를 선택하는 편이 낫다. <br>

## 3. 확실하지 않은 경우엔 비검사 예외로 던져라

왜냐하면 쓸대없는 검사 예외를 사용하면 API 자체를 사용하기가 어려워지기 때문이다 (Item 71) <Br>
사용하는 측에선 무조건 예외를 처리해야 함으로 부담스러울 수 밖에 없고, 스트림에서 직접 사용할 수 없어 활용도가 떨어지게 된다. <br> 
**특히 호출자가 예외 상황을 복구할 수도 없는데, 검사 예외를 던져버리면 호출자는 난감할 수 밖에 없다.** <br>
이런 경우 차라리 Optional을 활용하는 것도 좋다. <br> 
(만약 Optional만으로는 상황을 처리하기에 충분한 정보를 제공할 수 없는 상황이라면, 검사 예외를 던져라) <br> 

## 4. 검사 예외도 아니고, RuntimeException도 아닌 throwable은 정의하지 말라
비검사 throwable은 모두 RuntimeException의 하위 클래스여야 한다. <Br>

![checked unchecked](https://github.com/binary-ho/TIL-public/assets/71186266/de3cd01e-eb11-4410-a96e-a7abf7765211)



그리고 Error는 보통 JVM이 자원이 부족하거나, 불변식이 꺠지는 상황 등에서 사용해야 하고, <Br>
자바 언어 명세가 요구하는 것은 아니지만, Error 클래스를 던지는 것도, 상속해 하위 클래스를 만드는 것도 모두 자제해야 한다. <br> <br>

그렇다고 해서 Exception도 RuntimeException도 Error도 아닌 throwable을 던지지는 말라 <Br>
이로울게 하나도 없다. throwable은 정상적인 검사 예외보다 사실상 나을게 하나도 없는데, API 호출자를 헷갈리게 할 뿐이다. <br>
throwalbe은 대부분 오류 메시지 포맷을 작성하지 않는데, 이는 JVM이나 릴리스에 따라 포맷이 달라질 수도 있다는 것을 의미한다. <br>



## 5. 검사 예외는 복구에 필요한 정보를 알려주는 메서드를 제공해라
검사 예외는 일반적으로 호출부에서 복구할 수 있는 조건일 때 발생한다. <br>
호출자가 예외 상황이 발생했을 때, 적절히 대체할 수 있도록 정보를 알려주는 메서드를 함께 제공해야 한다. (Item 75) <Br>

실패 순간을 포착하고, 적절한 조취를 취하는 것을 돕기 위해선 발생한 예외와 관련된 모든 매개변수와 필드의 값을 실패 메시지에 담는 편이 좋다. <Br>

## Reference
- Effective Java <조슈아 블로크>
