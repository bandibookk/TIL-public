# 2.4 ER 모델의 특별한 기능
## 2.4.1 key constrains - 키 제약조건
두 개체집합 Employees와 Department 사이의 관계 집합 Manages가 있다. 이 관계집합에서 
1. **각 부서에는 최대 1명의 관리자만 있어야 한다. -> 화살표로 표현됨** **화살표가 출발하는 개체는 화살표로 가리키는 개체를 유일하게 하나만 가져야 한다.** 
2. **한 직원은 여러 부서를 관리할 수 있다. -> 평범한 실선으로 표현됨**

<br>

![key constraints](https://user-images.githubusercontent.com/71186266/191181374-fdfec4e6-69df-43bb-aa91-d2e29da0712f.png)

1번의 화살표 제약 조건을 보자. 화살표로 가리켜진 개체들은 일대다 관계를 갖게 되는데, **화살표가 출발하는 개체는 화살표로 가리키는 개체를 유일하게 하나만 가진다.** <br>

조금 헷갈리는데.. 나 만의 이상한 비유를 들자면, 짝사랑과 같다. 어떤 사람은 여러 이성에게 짝사랑을 받을 수 있다. 하지만 좋아하는 사람은 한명만을 가리킬 수 있다. <br>

그래서 **일-대-다 관계로 부른다.** 평범한 실선으로 이어진 관계는 **다-대-다** 관계이다. 상대도 여러명의 친구들 둘 수 있고, 나 또한 여러명의 친구를 둘 수 있는 것과 같다. 

<br>

그렇다면 **일-대-일**관계를 나타내 보자. 위에서 제시한 그림을 아래와 같이 수정하여 **한 직원이 많아야 하나의 부서만 관리할 수 있다는 조건을 추가한다면 이는 일-대-일 관계집합을 갖게 된다.**

![key constranis2](https://user-images.githubusercontent.com/71186266/191181378-4ee9933a-d985-4833-8d1d-be699d7b502d.png)

결론을 비유해 보겠다. 
<br>
1. 평범한 실선: 친구 관계(다-대-다)
2. 화살표 관계: 짝사랑 관계 (일-대-다)
3. 화살표로 서로 가리키는 관계: 결혼 관계 (일-대-일)


## 2.4.2 participation constraints - 참여 제약조건
참여에 관한 강제성을 부여하는 조건입니다. 위에서 이용한 예시를 다시 인용하겠습니다. **모든 부서는 관리자가 필수로 있어야 한다.**라는 제약 조건을 걸어주고 싶다고 가정합니다. 이럴 때, 우리는 참여도가 **전체적(total)**이라고 표현하며 **굵은 실선으로 표시합니다.** 전체적이 아닌 참여도를 **부분적(partial)**이라고 합니다.

![participation constraints](https://user-images.githubusercontent.com/71186266/191186524-5c30ba9b-fb86-4fd9-8d13-49a384a5a99c.png)

참여도가
- 전체적: 모두 참여한다 => **해당 관계집합에 개체가 무조건 참여한다. 모든 부서는 관리자가 무조건 있다.**
- 부분적: 무조건 참여하지는 않음. 있을 수도, 없을 수도..

위 그림은 아래와 같이 해석할 수 있겠습니다
1. **모든 부서에는 필수적으로 매니저가 있고, 매니저는 한명이다. 매니저는 여러 부서를 관리할 수도 있다.**
2. **모든 직원들은 적어도 한 부서에서 근무하고, 각 부서에도 적어도 한 명의 직원이 근무하고 있다.**

## 2.4.3 약개체
약개체는 그것의 **attrivute 일부와 식별 소유자(identifying owner)**에 해당하는 **개체의 기본키**를 결합하여야만 유일하게 식별될 수 있다. <br>

말이 어려운데, 풀어 말 하면, **약개체 집합은 어딘가에 꼭 속해야만 존재하는 나약한 개체다!** 해당 집합을 소유하는 소유자 개체가 있고, 소유자 개체집합과 **일-대-다 관계를 갖는다.** <br>
하나의 소유자 개체집합은 다수의 약개체와 연관 될 수 있지만, 약개체는 오직 하나의 소유자를 갖는다. (ㅠㅠ) <br>

이러한 관계집합을 해당 약개체집합의 **식별 관계집합(identifying relationship set)**이라고 한다. 약개체집합은 식별 관계집합에 전체적으로 참여하여야 한다. <br>

그리고, 약개체집합은 그 자체로 유일하게 식별될 수 없고, **약개체집합의 키와 소유자 개체집합의 개체 키를 함께 취할 때 유일하게 식별될 수 있다.** <br>
그 모습은 아래와 같이 나타난다.

![weak entity](https://user-images.githubusercontent.com/71186266/191197282-1e6d05ff-92f5-47fc-92ff-d1229042fbc3.png)

1. 굵은 선과 화살표로 Dependents는 Policy와 일-대-다이며, 전체 참여이다. -> 이로서 Dependents는 무조건 하나의 Policy를 갖는다. Policy는 여러 Dependents를 가질 수 있다.
2. 둘의 관계: Dependents가 약개체집합이고, 그것의 식별 관계집합이 Policy라는 것을 강조하기 위해, 마름모와 네모의 border를 진하게 표시했고, pname은 ssn과 함께 할 떄 유일하게 식별됨을 강조하기 위해 pname의 밑줄은 점선이다. 
