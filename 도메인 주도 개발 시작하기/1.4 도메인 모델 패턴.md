# 1.4 도메인 모델 패턴
일반적인 애플리케이션 아키택쳐는 아래 그림과 같이 4가지 영역으로 구성되어 있다. <br>


<img width="396" alt="아키텍쳐" src="https://user-images.githubusercontent.com/71186266/221119331-d6fd3643-5859-4b90-960e-57ed0379d711.png">


국내에 외국인 쉐프들로만 구성된 고급 레스토랑이 있다고 생각해보자. <br>
웨이터는 우리의 주문을 받아주고, 영어로 외국인 헤드 쉐프한테 우리의 주문을 해석해준다. <br>
이 외국인 헤드 쉐프는 조금 특이하다. 요리법들을 잘 모른다. <Br>
다만 각 쉐프가 담당하고 있는 요리는 알고 있다. <Br>
그래서 코스 요리 주문이 들어오면, 각 쉐프들에게 적절한 타이밍에 어떤 요리를 해올것을 명령한다. <Br> 
그러면 쉐프들은 열심히 요리를 한다. 필요한 경우 창고에서 재료들을 가져온다. <br>
헤드 쉐프가 요리를 취합하여 웨이터에게 건내주면, 우리는 그 요리를 받게 되고 맛있게 먹으면 된다. <br>
좋은 비유인지는 모르겠다. <br>
1. 웨이터는 Presentation 영역
2. 헤드 쉐프는 Application 영역에 속한다.
3. 쉐프들은 Domain 영역에 속한다
4. 그리고 창고는 인프라스트럭쳐 영역에 속한다.

<br>

가장 상위 영역인 Presentation 영역은 클라이언트와 직접 대면하는 영역으로, `사용자 인터페이스 영역` 또는 `표현 영역`라고 부른다. <br>
컨트롤러나 뷰를 떠올리면 쉽다. <br>
최전방에서 클라이언트의 요청을 받아내어, 응용 계층이나 도메인 계층이 이해할 수 있는 형태로 바꾸고, 전달한다. <br>
그리고 처리된 내용을 다시 받아서 사용자에게 보내주는 역할을 한다. <br>
여기서 '사용자'란 꼭 소프트웨어 사용자만을 가리키는게 아니라, 외부 시스템일 수도 있다. <br> 
마치 웨이터 처럼, 우리의 주문을 주방의 언어로 적절하게 해석하여 전달해주고, 
헤드 쉐프가 요리를 건내주면, 이를 우리에게 서빙해준다. <br> <br>
Application 계층은 사용자의 요청을 실행하는 곳이다. <br>
그렇다고 주 업무인 '도메인' 로직, '비즈니스' 로직을 직접 구현하지는 않으며, **도메인 계층들을 조합해서 기능을 실행한다.** <br>
그리고 도메인 영역은 소프트웨어의 핵심 문제 영역이다. <Br>
가령 식당의 핵심은 음식을 판매하는 것이므로, '음식' 혹은 쉐프가 처리하는 '요리'가 되겠다. <br>

인프라 스트럭쳐 계층은 데이터베이스나, 메시징 시스템과 같은 외부 시스템과의 연동을 처리하는 부분이다. <Br>
위에서 음식 창고로 비유했지만, 정확히 '창고'는 아니고, 창고와 직접 소통하는 계층을 의미한다. 


## 도메인 모델

도메인 안에는 여러 규칙들이 존재하고 있다. <Br>
가령 주문 도메인 안에는 여러 규칙이 있다.
1. 출고 전에 배송지 변경이 가능하다.
2. 배송 전에 주문 취소가 가능하다.

이런 규칙들을 구현한 코드가 도메인 계층에 위치하게 되고, <br>
**객체 지향적으로 도메인 규칙을 구현하는 패턴을 도메인 모델 패턴이라고 부른다.** <br>
즉, 소프트웨어의 핵심 문제 영역인 도메인들의 핵심 로직을 구현한 것을... 즉, **개념적으로 표현한 것을** 도메인 모델이라고 부르는 것이다. <Br>
도메인 영역은 이 도메인 모델들이 위치한 영역을 의미한다. <br> <br>

핵심 규칙을 표현한 코드들을 도메인 모델에 모아둠으로써, <br>
우리는 다른 계층과의 의존도를 낮추고, 도메인 계층의 응집도를 높힐 수 있다. <br>
즉, 규칙이 바뀌거나 확장해야 할 때 다른 곳에 최대한 적게 영향을 줄 수 있다. <br>
오직 모델에만 변경할 내용을 반영해주면 되는 것이다!

## Reference
- 도메인 주도 개발 시작하기 <최범균 저>
