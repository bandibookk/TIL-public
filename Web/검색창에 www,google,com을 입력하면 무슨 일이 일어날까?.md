
# www.google.com을 입력하면 무슨 일이 일어날까?
안녕하세요 전자전기공학부 학우 여러분. 저는 3학년에 재학중인 이진호입니다. 

우리는 매일 숨 쉬듯 인터넷을 사용합니다. 하루만 인터넷이 없어져도, 사람들은 미쳐버릴 지도 모릅니다. 하지만 인터넷에 대한 기본적인 원리나 동작은 잘 알지 못 합니다. 그래서 이번에 제가 이야기 해볼  주제는 주소 입력창에 www.google.com과 같은 사이트 주소를 입력하면 어떤 일이 일어날까? 입니다.

설명에 앞서 우리를 도와줄 사이트를 보여드리겠습니다. 서울 소재의 어떤 대학교의 사이트입니다. 주소는 https://www.hongik.ac.kr 입니다.

<홍대 사이트 메인 사진>

## 1. URL과 DNS
우리가 앞서 언급한 https://www.hongik.ac.kr와 같은 형태를 가진 문자열을 URL이라고 부릅니다. 이는 Uniform Resource Identifier라는 URI의 분류 중 하나입니다.  

URI는 무엇일까요? 그대로 해석해보면 Resource를 식별하는 어떤 통일된 방식으로 해석할 수 있겠습니다. 아직 Resource가 정확히 무엇지는 모르겠지만, 이 Resource를 식별하기 위한 방식이라고 이해해주시면 됩니다.

그럼 URL은 무엇일까요? Uniform Resource Locator라는 단어의 약자이며, Resource의 위치를 가르키는 통일된 방식으로 해석 가능합니다. 즉, URL은 Resource가 어디에 위치해 있는지 가르키는 문자열입니다. 

이 URL을 통해 우리는 Resource가 어디에 있는지 알 수 있습니다. 인터넷에서 서로 통신을 하기 위해 정해둔 약속인 프로토콜중 하나인 https와, DNS 주소인 www.hongik.ac.kr가 합쳐진 형태를 띄고 있습니다.

DNS 주소는 대체 뭘까요? 우리는 원래 어떤 사이트에 접속할 때, 이런 영어로 된 문자열을 통해 접속하는 것이 아니라, Resource를 가지고 있는 위치의 IP주소를 통해 접속을 합니다. 우리가 컴퓨터를 하면서 접하는 그 IP주소가 맞습니다. 

정말 헷갈리겠죠? 인간은 숫자로만 되어있는 정보의 암기에 취약합니다. 예를 들어 우리 나라에서 이름이라는 것이 사라지고 주민번호로만 서로를 불러야 한다면 어떨까요? 전화번호로만 사람을 불러야 한다면 어떨까요? "야 4885". "안녕하세요 980409-1234567"님. 상상만 해도 정말 어려운 일이죠? 

그래서 나온 것이 Domain Name Server라는 것입니다. 아까 말 한것과 같은 www.hongik.ac.kr과 같은 문자열을 도메인 네임이라고 부릅니다. 우리는 이 문자열을 통해 각 도메인의 네임들이 어떤 IP주소와 연관 되어있는 지에 대한 정보를 모아둔 도메인 네임 서버에서 리소스가 저장된 위치를 받아 옵니다.

접속 IP는 기업이나 인터넷의 사정에 따라 달라질 수가 있습니다. 이 때 우리가 일일히 바뀐 IP를 알 수가 없죠? 이 DNS가 있으면, 우리는 인터넷 주소만 외우면 됩니다, 바뀐 접속 IP는 인터넷 주소의 소유자들이 알아서 DNS에 저장해 주면 됩니다.

결국 웹 브라저의 주소창에 URL을 입력하는 행위는, 해당 페이지를 표현하는 Resource를 가져오기 위해, Resource를 가르키는 위치를 입력해 주는 행위입니다.

## 2. 서버와의 통신
우리는 평소에 인터넷에 접속 할 떄 IE, 크롬, 사파리 등의 웹 브라우저를 이용합니다. 브라우저를 단순히 인터넷에 들어갈 때 쓰는 어떤 틀로만 알고 있고 어떤 일을 하는지는 잘 모르는 분들이 많습니다. 하지만 웹 브라우저는 생각보다 많은 일들을 해줍니다. 

웹 브라우저의 주소창에 URL을 입력하면, 브라우저는 URL이 가르키는 위치에 해당 페이지를 표현하기 위한 Resource를 달라고 요청하는 메세지를 작성합니다. 

이번에는 홍익대학교 홈페이지의 총장 인사말 페이지를 통해 설명해보겠습니다. URL은 https://www.hongik.ac.kr/contents/www/cor/greeting_1.html 입니다.

<http 메세지 그림>

그림과 같은 메세지가 작성 됩니다. 원래는 https로 통신하였으나, 편의상 http로 설명합니다. 앞서 언급한 통신을 위한 규격인 프로토콜 http에 따른 메세지를 작성한 모습입니다. Resource를 요구하기 위한 정보들을 담고 있습니다. DNS 뒤의 주소들은 Resource의 세부 path나 쿼리입니다.

브라우저는 이 메세지를 작성한 다음 운영체제에게 이 메세지를 보내달라고 요청합니다. 우리가 흔히 아는 Linux, Window, iOS등이 운영체제에 속합니다. 그러면 운영체제는 위의 메세지를 포함하는 패킷을 만들어 네트워크 장비들을 통해 전송합니다. 

<패킷 그림>

패킷은 말 그대로 일종의 상자입니다. 이 상자 안에 서버와의 통신을 위한 HTTP메세지나, 출발지 도착지 등의 필요한 여러가지 정보들을 담습니다. 

사이트 관리자의 컴퓨터인, 서버에 패킷이 도착하면, 서버는 택배 상자를 까서 버리듯 패킷은 버리고, 안의 내용물들을 확인합니다. 도착한 정보들을 해석해서, 여러 정보들과 브라우저가 요청한 Resource를 포함한 응답 메세지를 만들어 줍니다.

<Http 응답 메세지>

응답 메세지 도한 패킷에 감싸져서 우리의 컴퓨터 웹 브라우저로 보내집니다. 그러면 우리의 웹 브라우저는 이 패킷을 열고, 메세지를 확인해서 Resource를 꺼냅니다. 그리고, 이 Resource를 통해 웹 브라저 화면을 렌더링합니다. 

그러면 아래와 같은 페이지가 나타나게 됩니다.

<총장 인사말>

## 3. Page Rendering
브라우저 위에 화면을 그리는 행위를 Rendering이라고 표현합니다. Resource라는 용어를 앞서 많이 사용했는데, 바로 페이지를 렌더링 하기 위해 필요한 재료들이 Resource의 정체입니다. 

일반적인 경우 이 Resource는 html, css, javascript 코드가 포함된 파일의 형태로 오게 됩니다. html은 화면의 뼈대를 만들고, css는 화면을 꾸며주고, 그리고 javascript는 화면과 사용자의 상호작용을 돕습니다. 아래는 홍익대학교 메인 홈페이지 사진입니다.

<html만 적용된 사진>

우리가 알던 모습과 많이 다르죠? 이 화면은 html만 적용된 화면입니다. 다른 페이지로 넘어가는 링크나, 기본 텍스트, 각종 사진 아이콘 등의 화면에 필요한 컨텐츠들만 딱 남아있는 앙상한 상태입니다. html 자체가 어떤 접객을 위한 언어가 아니라, 논문들의 레퍼런스를 편하게 보려고 만들어졌던 언어기 때문에, 이런 간단한 모습을 렌더링하게 됩니다.

<css 적용된 사진>

그리고 이것이 css가 적용된 화면입니다. css가 우리를 위해 얼마나 큰 일을 해왔는지 알 수 있죠? 하지만 위의 그림에서는 이상한 점이 있습니다. 제 마우스는 현재 '대학소개' 위에 올라가 있습니다. 원래는 이곳에 마우스를 올리면, 아래에 대학소개와 관련된 메뉴들이 나타나야 하는데, 나타나질 않습니다. 그리고 아래의 그림과 배너는 약 5~6초 간격으로 바뀌어야 하는데, 바뀌고 있지 않습니다. 이런 사용자와의 상호작용을 담당하는 언어가 javascript입니다.

<javascript 적용된 사진>

자바스크립트를 적용하니 정상적으로 세부 메뉴가 나타나고, 사진과 배너가 바뀌었습니다. 이렇게 브라우저는 URL을 분석하여 서버에 Resource 요청을 보내고, Resource를 통해 화면을 렌더링 해줍니다.

이제까지 웹 브라우저 주소창에 URL을 입력하면 어떤 일이 일어나는지에 대해 알아보았습니다. 이제는 숨쉬듯 당연한 것이 되어버린 인터넷과 브라우저에 대해 조금 알게 되면 재미있을 것 같아, 준비해 보았습니다. 감사합니다.

