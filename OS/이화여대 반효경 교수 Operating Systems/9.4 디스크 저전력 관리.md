## 9.4 디스크 저전력 관리
디스크의 전력소모를 줄이기 위한 다양한 기법들을 살펴보자.

### 1) 비활성화 기법
디스크의 상태는 전력소모 상태를 기준으로 4가지 상태로 나눌 수 있다.
1. `active 상태`: 헤드가 데이터를 읽거나 쓰고 있는 상태. 즉, 사용중인 상태.
2. `idle 상태`: `공회전 상태`로 디스크가 회전중이기만 하고, 데이터를 읽고 있지 않은 상태이다.
3. `standby 상태`: `준비 상태`는 디스크가 회전하지는 않지만, 인터페이스가 활성화중인 상태이다.
4. `sleep 상태`: `휴면 상태`는 디스크가 회전도 하지 않고, 인터페이스 또한 비활성화 된 상태이다.

편의상 active와 idle을 활성 상태라고 부르고 나머지를 비활성 상태라고 부른다. <br>
전기를 아끼기 위해 무작정 비활성 상태로 놓아서는 안 된다. <br>
상태 전환도 나름 시간과 전력이 소모되기 때문에, 후속 요청까지의 시간이 길어질 때만 비활성 상태로 돌리는 것이 낫다. <br>
시간기반, 예측기반, 확률기반의 3가지 기법으로 상태 전이를 결정한다. 

### 2) 회전속도 조절 기법

멀티미디어 환경에서는 데이터 접근에 주기성과 규칙성이 있기 때문에, 어느정도 접근을 예측할 수 있고, 이를 기반으로 회전 속도를 조절한다. <br>
별것 아닌것 같지만, OS와 하드웨어가 함께 회전속도를 조절하였을 때 전력 소모를 23%까지도 줄일 수 있다고 한다.


### 3) 디스크의 데이터 배치 기법
대부분의 컴퓨터 시스템에서 디스크의 53% 이상이 빈 공간인 상태로 남아있다고 한다. 이를 이용해 디스크 내에 데이터들의 replica를 많이 만들어, 헤드가 원본이든 replica든 가장 가까운 곳으로 움직이도록 만들어 최대한 헤드 이용을 줄이는 방식이다. <br>
이런 파일 시스템을 free space file systems - FS2 시스템이라고 부른다. <br>
물론 디스크가 내용의 복제본을 운용하는 경우, 쓰기 연산 상황에서 일관성 문제가 발생할 수 있다. <br>
이에, FS2에서는 가까운 복제본에 데이터를 쓰고 나머지 복제본들에 대해서는 주소테이블에 무효화 연산을 수행해 쓰기연산의 효율까지 높였다.

### 4) 버퍼캐싱 및 사전인출 기법
미래에 요청될 데이터를 예상할 수 있다면, 그런 데이터들을 헤드가 본인 주변에서 미리 사전인출 prefetching 해둔다. <br>
그러면 움직일 일이 더 줄면서 비활성화 가능성이 높혀진다. <br>
그리고 꼭 급하게 필요한 내용이 아니라면, 활성 상태를 보고 요청을 지연시킬 수도 있다. <br>

### 5) 쓰기전략을 통한 저전력 디스크 기법
디스크가 비활성화 상태일 때는, 쓰기 요청이 들어와도 직접 쓰지 않고 기다리다가, 활성 상태로 들어갔을 때 쓰는 데이터 쓰기전략을 `write-back with eager updates`라고 부른다. <br>
유사한 방식으로는 비활성화 상태에 입력이 들어오면, 일단 블록들을 로그 디스크에 적어 두었다가, 활성 상태가 되면 쓰기연산을 수행하는 방식을 `write-through with deferred update`라고 부른다.

## Reference
- 운영체제와 정보기술의 원리 <반효경 저>
