
# 6. 커널 오브젝트와 오브젝트 핸들
# 1. 커널 오브젝트에 대한 이해
Windows와 같은 OS는 기본적인 요소 이외에도 인터넷 익스플로러, 그림판, 계산기 등의 아주 다양한 기능적 요소들을 지니고 있다.
<br>

**커널은, 컴퓨터를 운영하는 데 있어서 중심이 되는 운영체제 핵심 부분을 뜻하는 것입니다.** 일반적으로 커널이라는 용어와 운영체제라는 용어는 같은 의미로 사용된다. 굳이 명확하게 구분할 필요는 없다. 
<br>  

**커널 오브젝트**는 **커널에서 관리하는 중요한 정보를 담아둔 데이터 블록을 가르킨다.** `커널 오브젝트` 자체를 하나의 고유명사로 받아들여야한다. '운영체제 오브젝트'와 같은 표현을 사용해선 안 된다.

## 1.1 커널 오브젝트가 뭔데요
우리는 CreateProcess등의 함수를 통해 프로세스 생성을 **요청** 할 수 있다. **프로세스를 생성하고, 관라하는 실질적인 주체는 ~~프로그래머~~가 아니라 운영체제이다.** 전부 운영체제의 몫이다!
<br> <br>

이렇게 운영체제가 프로세스들을 관리하기 위해선, 다양한 정보들을 담아둘 무언가가 필요하다. 이를테면, 프로세스 state나 우선순위 등을 가지고 있어야한다. **이를 위해 Windows 개발자들이 정의한 구조체를 `프로세스 관리 구조체`라고 부르는데 이것이 바로 Kernel Object의 정체이다.** 프로세스가 하나 생성될 떄 마다 새롭게 프로세스 관리 구조체 변수가 생성되고, 새롭게 생성된 프로세스 정보들로 초기화 된다. 

## 1.2 그 이외의 커널 오브젝트들
꼭 프로세스가 생성될 때에만 커널 오브젝트가 생성되는 것은 아니다. 프로세스 내에서 프로그램 흐름을 구성하는 **쓰레드의 생성**, 파이프나, 메일 슬롯을 생성할 때도, 그리고 Windows에서는 **파일을 생성할 때도** 커널 오브젝트가 생성된다. 이 모든 것들이 **Windows 커널에 의한 관리 대상이기 때문이다!(중요)** <br>

이 모든 종류의 커널 오브젝트들이 하나의 구조체에서 생성되는 것은 아니다. 당연하게도, 리소스(Resource)에 따라 저장하고 관리되어야 하는 요소들이 다르기 때문에, 여러 구조체들이 존재한다. 조금 생각해보면 당연한 이야기이다. <br>

**결론: Windows 운영체제는 프로세스, 쓰레드, 파일과 같은 리소스들을 원활히 관리하기 위해 필요한 정보들을 저장해야 한다. 이때 데이터를 저장하는 메모리 블록을 가리켜 커널 오브젝트라고 한다. Windows 커널에 의해 관리되는 리소스의 수만큼, 커널 오브젝트도 생성된다.**


## 1.3 오브젝트 핸들(Handle)을 이용한 커널 오브젝트의 간접적인 조작
