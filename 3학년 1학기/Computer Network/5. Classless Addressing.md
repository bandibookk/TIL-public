# 5. Classless Addressing

Classless Addressing은 기존의 Classful addressing에서 클래스만 사라진 것입니다. 원래는 정해진 크기의 Class A, B, C의 크기대로만 분할이 가능하고, 필요하면 subnetting을 하는 방식으로 사용되었습니다. **그러나 이러한 방식은 꼭 필요한 만큼만 할당 받는 것이 불가능해 비효율적이였습니다. (fixed length 문제)** 예를 들어, 치킨 한 조각이면 배가 부른 사람인데, 무조건 1마리 부터 주문이 가능한다거나.. 물이 2.5L만 필요한 사람에게 무조건 1L의 물만 판매한다면 쓸데없는 추가 구매가 이루어지겠죠?
<br/>


#### 그렇게 도입된 것이 바로 Classless Inter-Domain Routing 즉, CIDR입니다.     
<br/>

# 5.1 CIDR
CIDR addressing block은 아래와 같은 특징들을 가지고 있습니다.

1. Non-overlapping
2. **Addresses in the same block share the same prefix**
3. 길이가 2의 제곱으로 제한 되어있다.
4. **시작 주소와 prefix의 length로 나타낸다.**

**CIDR 주소 블럭은 같은 prefix를 가지고, 서로 non overlapping입니다.** 2번의 이유 때문에 mask를 만들 수 없어 supernetting이 안 됩니다.    
단점으로는 **어디까지가 net id고, 어디 부터가 host id인지 알 수 없다**는 점이 있습니다. **이는 네트워크 마스크를 파악하기 힘들다는 문제로 이어집니다.** 이를 해결하려면 위해 마치 subnetting 에서 그러했던 것 처럼 **prefix length를 알려주는 무언가가 필요합니다. 이렇게 도입된 것이 CIDR Notation 입니다.**
<br/>

# 5.2 CIDR Notation
![cidr notation](https://user-images.githubusercontent.com/71186266/168458067-615efe85-7c8e-4396-93ac-6344647a95b9.PNG)

위의 그림은 CIDR 표기법을 나타낸 것입니다. 
맨 뒤의 `/n` 부분을 제외하고는, 클래스풀 어드레싱과 똑같이 보면 됩니다.    
추가된 `/n` 부분은 **Prefix Length를 나타냅니다. n만큼의 길이의 mask를 가지고 있다고, 친절하게 알려주는 표기법입니다.**

## 빠르게 마스크를 파악하는 법!
별건 아니고 시험을 대비한 빠른 풀이입니다.
1. **n의 길이를 확인해서 변하지 않는 byte 부분을 빠르게 파악합니다.** 
1 byte는 8bit이므로, n이 8\~15이면 첫 byte는 숫자 그대로가 마스크이고, 16~23이면 앞에서 두 byte는 숫자 그대로가 mask입니다. 더 짧게 표현하자면 **n/8의 몫의 갯수만큼의 byte는 주소 그대로 mask가 됩니다.** <br/>        
    
2. **변하지 않는 부분을 완성합니다.**    
n/8의 나머지 만큼의 bit이 변하지 않는 byte 뒤로 또 마스크가 됩니다. **그러니까 처음 변하는 byte 부분을 8자리 2진수로 나타낸 다음,  앞에서 부터 n%8 만큼을 마스크로 잡아줍니다.** <br/>


3. **이후 나머지 뒷 부분에 0을 채워주면 시작 주소를 찾게 됩니다.**
반대로 1을 채워주면 마지막 주소가 되겠지요?

예를 들어 설명하겠습니다.
주소 140.120.84.24/20이 주어졌을 때의 시작 주소를 찾겠습니다.
1. 20 bit가 마스크로 쓰이기 때문에 20/8 의 몫인 16 bit = 2 byte가 변하지 않게 되므로, 일단 140.120. 까지 마스크입니다.
2. 이후 4 bit 만큼이 더 mask이기 때문에 3번째 byte를 2진수화 시켜주면    
84 = <U>0101</U>0100(2)입니다. 여기서 밑줄 친 앞에서 4 bit만큼이 mask가 되겠습니다. 그러니까 **<U>0101</U>0000(2) = 80이 3번째 칸의 mask가 됩니다.**
3. **mask, 시작 주소는 140.120.80.0이 되겠습니다!**
4. 번외로 마지막 주소는 **<U>0101</U>1111(2) = 95**가 3번째 byte인 **140.120.95.255가 되겠습니다.**


### 참조
TCP/IP 프로토콜 <(주)한터에듀>
